<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Campaign Sequence - RoleFerry</title>
<link rel="stylesheet" href="../styles.css" />
<link rel="stylesheet" href="responsive.css" />
<link rel="icon" href="../assets/roleferry_trans.png" />
<style>
  .tab-container {
    min-height: 100vh;
    background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
    padding: 2rem;
  }
  .tab-header {
    text-align: center;
    margin-bottom: 3rem;
  }
  .tab-title {
    font-size: 2.5rem;
    font-weight: 700;
    background: linear-gradient(45deg, #8b5cf6, #ef4444);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  .sequence-grid {
    display: grid;
    grid-template-columns: 260px 1fr 300px;
    gap: 2rem;
    max-width: 1400px;
    margin: 0 auto;
  }
  .contact-sidebar {
    background: rgba(31, 41, 55, 0.5);
    border-radius: 12px;
    padding: 1.5rem;
    border: 1px solid #374151;
    height: fit-content;
  }
  .contact-sidebar h3 {
    color: #ffffff;
    margin: 0 0 1rem 0;
    font-size: 1.1rem;
  }
  .contact-filters {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    margin-bottom: 1rem;
  }
  .contact-filters select {
    background: #111827;
    color: #e5e7eb;
    border: 1px solid #374151;
    border-radius: 6px;
    padding: 4px 8px;
    font-size: 0.8rem;
  }
  .contact-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  .contact-item {
    padding: 0.75rem;
    border-radius: 8px;
    background: rgba(17,24,39,0.8);
    margin-bottom: 0.75rem;
    border: 1px solid #4b5563;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  .contact-item:hover,
  .contact-item.active {
    border-color: #8b5cf6;
    background: rgba(139,92,246,0.25);
  }
  .contact-item .name {
    color: #f9fafb;
    font-size: 0.95rem;
    font-weight: 600;
  }
  .contact-item .meta {
    color: #9ca3af;
    font-size: 0.8rem;
  }
  .contact-item .email {
    color: #60a5fa;
    font-size: 0.75rem;
  }
  .sequence-list {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
  }
  .sequence-step {
      background: rgba(31, 41, 55, 0.8);
      border: 1px solid #374151;
      border-radius: 12px;
      padding: 1.5rem;
      transition: all 0.3s ease;
  }
  .sequence-step:hover {
      border-color: #8b5cf6;
      box-shadow: 0 4px 20px rgba(139, 92, 246, 0.1);
  }
  .step-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      border-bottom: 1px solid #4b5563;
      padding-bottom: 0.5rem;
  }
  .step-title {
      font-size: 1.2rem;
      color: #ffffff;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
  }
  .step-badge {
      background: #8b5cf6;
      color: white;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 0.8rem;
  }
  .step-timing {
      color: #9ca3af;
      font-size: 0.9rem;
  }
  .step-content {
      background: rgba(0, 0, 0, 0.3);
      padding: 1rem;
      border-radius: 8px;
      color: #d1d5db;
      font-family: 'Courier New', monospace;
      font-size: 0.95rem;
      white-space: pre-wrap;
      max-height: 150px;
      overflow-y: auto;
  }
  .step-editor {
      width: 100%;
      padding: 1rem;
      border-radius: 8px;
      border: 1px solid #4b5563;
      background: rgba(0, 0, 0, 0.6);
      color: #e5e7eb;
      font-family: 'Courier New', monospace;
      font-size: 0.95rem;
      min-height: 150px;
      resize: vertical;
  }
  .step-actions {
      margin-top: 1rem;
      display: flex;
      justify-content: flex-end;
      gap: 0.5rem;
  }
  .btn-icon {
      background: transparent;
      border: 1px solid #4b5563;
      color: #9ca3af;
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.2s;
  }
  .btn-icon:hover {
      border-color: #8b5cf6;
      color: #ffffff;
      background: rgba(139, 92, 246, 0.1);
  }
  .sidebar {
      background: rgba(31, 41, 55, 0.5);
      border-radius: 12px;
      padding: 1.5rem;
      border: 1px solid #374151;
      height: fit-content;
  }
  .sidebar h3 {
      color: #ffffff;
      margin: 0 0 1.5rem 0;
      font-size: 1.1rem;
  }
  .preflight-list {
      list-style: none;
      padding: 0;
      margin: 0;
  }
  .preflight-list li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem 0;
      border-bottom: 1px solid #374151;
  }
  .preflight-list .status {
      font-weight: bold;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 0.8rem;
  }
  .status.green { background-color: #10b981; color: white; }
  .status.yellow { background-color: #f59e0b; color: white; }
   .status.blue { background-color: #3b82f6; color: white; }
  .preflight-list .label { color: #d1d5db; font-size: 0.9rem; }

  .back-button {
    position: fixed;
    top: 2rem;
    left: 2rem;
    padding: 12px;
    background: rgba(0, 0, 0, 0.9);
    color: white;
    border: 2px solid rgba(74, 144, 226, 0.5);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    font-weight: 600;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .back-button:hover { background: rgba(74, 144, 226, 0.9); }

  .next-button {
    position: fixed;
    top: 2rem;
    right: 2rem;
    padding: 12px 24px;
    background: linear-gradient(135deg, #4A90E2 0%, #87CEEB 100%);
    color: #1a1a1a;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    font-weight: 700;
    z-index: 100;
  }
  .next-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(74, 144, 226, 0.4);
  }

  .progress-indicator {
    position: fixed;
    top: 5rem;
    right: 2rem;
    background: rgba(0, 0, 0, 0.9);
    padding: 1rem;
    border-radius: 12px;
    color: white;
    font-weight: 600;
    border: 2px solid rgba(74, 144, 226, 0.5);
    z-index: 100;
  }
  .spam-word {
    color: #f97316;
    font-weight: 600;
  }

  /* Responsive Design */
  @media (max-width: 1024px) {
    .sequence-grid { grid-template-columns: 1fr; }
    .contact-sidebar { margin-bottom: 1.5rem; }
    .sidebar { display: none; }
  }
</style>
</head>
<body>
  <div class="tab-container">
    <a href="../wireframes.html" class="back-button" title="Back to Path">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="width: 24px; height: 24px; fill: white;">
        <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
      </svg>
    </a>
    <a href="deliverability-launch.html" class="next-button">Launch Campaign ‚Üí</a>

    <div class="tab-header">
      <h1 class="tab-title">Campaign Sequence</h1>
    </div>

    <div class="sequence-grid">
        <div class="contact-sidebar">
            <h3>Contacts</h3>
            <div class="contact-filters">
              <select>
                <option>All locations</option>
                <option>US (EST)</option>
                <option>US (PST)</option>
              </select>
              <select>
                <option>All levels</option>
                <option>VP / C-level</option>
                <option>Director</option>
                <option>Manager / IC</option>
              </select>
            </div>
            <ul class="contact-list" id="contactList">
              <li class="contact-item active" data-contact-id="jane">
                <div class="name">Jane Doe</div>
                <div class="meta">VP Engineering ¬∑ TechCorp</div>
                <div class="email">jane.doe@techcorp.com</div>
              </li>
              <li class="contact-item" data-contact-id="alex">
                <div class="name">Alex Rivera</div>
                <div class="meta">Head of Data ¬∑ Innovate Analytics</div>
                <div class="email">alex.rivera@innovate.ai</div>
              </li>
              <li class="contact-item" data-contact-id="morgan">
                <div class="name">Morgan Lee</div>
                <div class="meta">VP Customer Success ¬∑ GrowthLoop</div>
                <div class="email">morgan.lee@growthloop.io</div>
              </li>
            </ul>
        </div>

        <div class="sequence-list" id="sequenceList">
            <!-- Step 1 -->
            <div class="sequence-step">
                <div class="step-header">
                    <div class="step-title">
                        <span class="step-badge">Step 1</span> Initial Outreach
                    </div>
                    <span class="step-timing">Send Immediately</span>
                </div>
                <div class="step-content">Subject: Strategic discussion: {{job_title}} at {{company_name}}

Hi {{contact.name}},

I've been following {{company.name}}'s recent work on...</div>
                <div class="step-actions">
                    <button class="btn-icon" onclick="toggleEditStep(1, this)">‚úèÔ∏è Edit</button>
                    <button class="btn-icon" onclick="scrollToPreview()">üëÅÔ∏è Preview</button>
                </div>
            </div>

            <!-- Step 2 -->
            <div class="sequence-step">
                <div class="step-header">
                    <div class="step-title">
                        <span class="step-badge">Step 2</span> Polite Nudge
                    </div>
                    <span class="step-timing">Send after 
                      <select id="delayStep2" style="background:#111827;color:#e5e7eb;border:1px solid #4b5563;border-radius:4px;padding:2px 4px;font-size:0.8rem;">
                        <option>1</option>
                        <option selected>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                        <option>6</option>
                        <option>7</option>
                        <option>8</option>
                        <option>9</option>
                        <option>10</option>
                      </select> days
                    </span>
                </div>
                <div class="step-content">Subject: Re: Strategic discussion: {{job_title}} at {{company_name}}

Hi {{contact.name}},

Just bubbling this up in case it got buried. I'm still very interested in discussing how I can help with {{pain_point_1}}...</div>
                <div class="step-actions">
                    <button class="btn-icon" onclick="toggleEditStep(2, this)">‚úèÔ∏è Edit</button>
                    <button class="btn-icon" onclick="scrollToPreview()">üëÅÔ∏è Preview</button>
                </div>
            </div>

            <!-- Step 3 -->
            <div class="sequence-step">
                <div class="step-header">
                    <div class="step-title">
                        <span class="step-badge">Step 3</span> Value Add
                    </div>
                    <span class="step-timing">Send after 
                      <select id="delayStep3" style="background:#111827;color:#e5e7eb;border:1px solid #4b5563;border-radius:4px;padding:2px 4px;font-size:0.8rem;">
                        <option>1</option>
                        <option>2</option>
                        <option selected>4</option>
                        <option>5</option>
                        <option>6</option>
                        <option>7</option>
                        <option>8</option>
                        <option>9</option>
                        <option>10</option>
                      </select> days
                    </span>
                </div>
                <div class="step-content">Subject: Relevant case study for {{company_name}}

Hi {{contact.name}},

I thought you might find this case study relevant given {{company.news}}. It details how I solved a similar challenge...</div>
                <div class="step-actions">
                    <button class="btn-icon" onclick="toggleEditStep(3, this)">‚úèÔ∏è Edit</button>
                    <button class="btn-icon" onclick="scrollToPreview()">üëÅÔ∏è Preview</button>
                </div>
            </div>

            <!-- Step 4 -->
            <div class="sequence-step">
                <div class="step-header">
                    <div class="step-title">
                        <span class="step-badge">Step 4</span> Final Attempt
                    </div>
                    <span class="step-timing">Send after 
                      <select id="delayStep4" style="background:#111827;color:#e5e7eb;border:1px solid #4b5563;border-radius:4px;padding:2px 4px;font-size:0.8rem;">
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                        <option selected>7</option>
                        <option>8</option>
                        <option>9</option>
                        <option>10</option>
                      </select> days
                    </span>
                </div>
                <div class="step-content">Subject: Final check-in

Hi {{contact.name}},

I'll assume now isn't the right time. If priorities change regarding {{pain_point_1}}, feel free to reach out.

Best,
[Your Name]</div>
                <div class="step-actions">
                    <button class="btn-icon" onclick="toggleEditStep(4, this)">‚úèÔ∏è Edit</button>
                    <button class="btn-icon" onclick="scrollToPreview()">üëÅÔ∏è Preview</button>
                </div>
            </div>
        </div>

        <div class="sidebar">
            <h3>Campaign Health</h3>
            <ul class="preflight-list">
                <li>
                    <span class="label">Email length</span>
                    <span class="status blue" id="emailLengthStatus">0 characters (optimal 300‚Äì500)</span>
                </li>
                <li>
                    <span class="label">Spam Words</span>
                    <span class="status green" id="spamStatus">0 found</span>
                </li>
                <li>
                    <span class="label">Sending Volume</span>
                    <span class="status yellow">~50/day (placeholder)</span>
                </li>
            </ul>
            <div style="margin-top: 2rem; text-align: center;">
                <button class="btn-icon" style="width: 100%; border-color: #10b981; color: #10b981;" onclick="scrollToPreview()">Preview campaign ‚Üì</button>
            </div>
        </div>
    </div>

    <div id="previewSection" style="max-width: 1000px; margin: 3rem auto 0; background: rgba(17,24,39,0.9); border-radius: 16px; border: 1px solid #374151; padding: 2rem;">
      <h2 style="color:#ffffff; margin-top:0; margin-bottom:0.5rem;">Preview Campaign</h2>
      <p style="color:#9ca3af; font-size:0.95rem; margin-bottom:1.5rem;">This is how your full sequence will be sent for the currently selected contact.</p>
      <div id="previewList" style="display:flex; flex-direction:column; gap:1rem;"></div>
    </div>

  </div>
  <script>
      const campaignTemplates = {
        jane: {
          steps: [
`Subject: Strategic discussion: Senior Software Engineer at TechCorp

Hi Jane,

I've been following TechCorp's recent work on real-time personalization and would love to help you push it further...`,
`Subject: Re: Strategic discussion: Senior Software Engineer at TechCorp

Hi Jane,

Just bubbling this up in case it got buried. I'm still excited about helping your team scale experimentation on AWS...`,
`Subject: Case study: 20% infra cost reduction

Hi Jane,

Sharing a quick case study where I reduced infra costs by 20% while improving reliability...`,
`Subject: Final check-in ‚Äì Senior Software Engineer

Hi Jane,

I'll assume now isn't the right time. If priorities change around scaling experimentation and infra, I'm happy to revisit.

Best,
Alex`
          ]
        },
        alex: {
          steps: [
`Subject: Data platform discussion: Senior Data Engineer at Innovate Analytics

Hi Alex,

Your work on event pipelines at Innovate caught my eye‚ÄîI've led similar migrations from batch to streaming...`,
`Subject: Re: Data platform discussion

Hi Alex,

Quick nudge in case this slipped. I can help consolidate your Kafka/Flink stack and reduce pipeline latency...`,
`Subject: Real-time analytics case study

Hi Alex,

Here's a short example of how I helped ship real-time dashboards for 1M+ events/second...`,
`Subject: Final check-in ‚Äì Senior Data Engineer

Hi Alex,

No worries if now isn't ideal. If priorities shift around real-time analytics or ML feature stores, feel free to reach out.

Best,
Alex`
          ]
        },
        morgan: {
          steps: [
`Subject: Customer Success ops discussion ‚Äì RoleFerry pilot

Hi Morgan,

Given GrowthLoop's focus on expansion and renewals, I think RoleFerry could help your CSMs prioritize high-intent accounts...`,
`Subject: Re: Customer Success ops discussion

Hi Morgan,

Just following up‚Äîhappy to show you how similar teams improved response rates using personalized outreach...`,
`Subject: CS playbook automation example

Hi Morgan,

Sharing a quick example of automating renewal playbooks that increased on-time renewals by 12%...`,
`Subject: Final check-in ‚Äì CS ops pilot

Hi Morgan,

I'll drop this here for now. If you later want to experiment with a CS-focused outbound pilot, I'd love to collaborate.

Best,
Alex`
          ]
        }
      };

      function getStepElement(index) {
        const editors = document.querySelectorAll('.step-editor');
        const contents = document.querySelectorAll('.step-content');
        if (editors.length && editors[index]) return editors[index];
        return contents[index];
      }

      function updateEmailLength(stepIndex = 0) {
        const target = getStepElement(stepIndex);
        if (!target) return;
        const text = target.value !== undefined ? target.value : target.textContent;
        const length = text.length;
        const statusEl = document.getElementById('emailLengthStatus');
        if (statusEl) {
          statusEl.textContent = `${length} characters (optimal 300‚Äì500)`;
        }
      }

      function highlightSpamWords() {
        const spamWords = ['free', 'guaranteed', 'act now'];
        const contents = document.querySelectorAll('.step-content');
        let totalFound = 0;

        contents.forEach(el => {
          let html = el.innerHTML;
          spamWords.forEach(word => {
            const regex = new RegExp(`\\b(${word})\\b`, 'gi');
            const before = html;
            html = html.replace(regex, '<span class="spam-word">$1</span>');
            if (before !== html) {
              const matches = before.match(regex);
              if (matches) totalFound += matches.length;
            }
          });
          el.innerHTML = html;
        });

        const spamStatus = document.getElementById('spamStatus');
        if (spamStatus) {
          spamStatus.textContent = `${totalFound} found`;
          spamStatus.classList.toggle('green', totalFound === 0);
          spamStatus.classList.toggle('yellow', totalFound > 0);
        }
      }

      function applyCampaignTemplate(contactId) {
        const template = campaignTemplates[contactId];
        if (!template) return;
        const contents = document.querySelectorAll('.sequence-list .step-content');
        template.steps.forEach((text, idx) => {
          if (contents[idx]) {
            contents[idx].textContent = text;
          }
        });
        updateEmailLength(0);
        highlightSpamWords();
        renderPreview();
      }

      function toggleEditStep(stepNum, buttonEl) {
        const index = stepNum - 1;
        const step = document.querySelectorAll('.sequence-step')[index];
        if (!step) return;

        const isEditing = step.getAttribute('data-editing') === 'true';

        if (!isEditing) {
          const contentDiv = step.querySelector('.step-content');
          const textarea = document.createElement('textarea');
          textarea.className = 'step-editor';
          textarea.value = contentDiv.textContent;
          contentDiv.replaceWith(textarea);
          step.setAttribute('data-editing', 'true');
          if (buttonEl) buttonEl.textContent = '‚úî Done';
          textarea.addEventListener('input', () => updateEmailLength(index));
          updateEmailLength(index);
        } else {
          const textarea = step.querySelector('.step-editor');
          const div = document.createElement('div');
          div.className = 'step-content';
          div.textContent = textarea.value;
          textarea.replaceWith(div);
          step.setAttribute('data-editing', 'false');
          if (buttonEl) buttonEl.textContent = '‚úèÔ∏è Edit';
          highlightSpamWords();
          updateEmailLength(index);
          renderPreview();
        }
      }

      function scrollToPreview() {
        renderPreview();
        const section = document.getElementById('previewSection');
        if (section) {
          section.scrollIntoView({ behavior: 'smooth' });
        }
      }

      function renderPreview() {
        const list = document.getElementById('previewList');
        if (!list) return;
        list.innerHTML = '';
        const contents = document.querySelectorAll('.sequence-list .step-content');
        contents.forEach((el, idx) => {
          const wrapper = document.createElement('div');
          wrapper.style.border = '1px solid #374151';
          wrapper.style.borderRadius = '8px';
          wrapper.style.padding = '0.75rem 1rem';
          wrapper.style.background = 'rgba(15,23,42,0.9)';

          const title = document.createElement('div');
          title.style.color = '#e5e7eb';
          title.style.fontSize = '0.9rem';
          title.style.fontWeight = '600';
          title.style.marginBottom = '0.25rem';
          title.textContent = `Step ${idx + 1}`;

          const body = document.createElement('pre');
          body.style.margin = '0';
          body.style.whiteSpace = 'pre-wrap';
          body.style.color = '#9ca3af';
          body.style.fontFamily = `'Courier New', monospace`;
          body.style.fontSize = '0.85rem';
          body.textContent = el.textContent;

          wrapper.appendChild(title);
          wrapper.appendChild(body);
          list.appendChild(wrapper);
        });
      }

      document.addEventListener('DOMContentLoaded', () => {
        // Apply default template and metrics
        applyCampaignTemplate('jane');
        updateEmailLength(0);
        highlightSpamWords();
        renderPreview();

        // Wire contact selection
        const contactItems = document.querySelectorAll('#contactList .contact-item');
        contactItems.forEach(item => {
          item.addEventListener('click', () => {
            contactItems.forEach(i => i.classList.remove('active'));
            item.classList.add('active');
            const id = item.getAttribute('data-contact-id');
            applyCampaignTemplate(id);
          });
        });
      });
  </script>
</body>
</html>