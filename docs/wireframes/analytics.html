<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics - RoleFerry</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="icon" href="../assets/roleferry_trans.png">
    <style>
        .document-container { max-width: 1000px; }
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .metric-card {
            background: rgba(31, 41, 55, 0.8);
            border: 1px solid #374151;
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
        }
        .metric-card h3 {
            color: #f59e0b;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        .metric-card p {
            font-size: 1.8rem;
            font-weight: bold;
            color: #10b981;
            margin: 0;
        }
        .campaign-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 2rem;
            background: rgba(31, 41, 55, 0.8);
            border-radius: 8px;
            overflow: hidden;
        }
        .campaign-table th, .campaign-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #374151;
        }
        .campaign-table th {
            background: #10b981;
            color: white;
            font-weight: 600;
        }
        .campaign-table tbody tr:hover {
            background: rgba(16, 185, 129, 0.1);
        }
        .export-button {
            background: #2563eb;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            margin-top: 1.5rem;
            display: inline-block;
        }
    </style>
</head>
<body>
    <div class="document-container">
        <div class="document-header">
            <h1>Analytics Dashboard</h1>
            <p>Track your client acquisition and campaign performance.</p>
        </div>

        <div class="analytics-grid">
            <div class="metric-card">
                <h3>Overall Reply Rate</h3>
                <p>15.2%</p>
            </div>
            <div class="metric-card">
                <h3>Meetings Booked</h3>
                <p>8</p>
            </div>
            <div class="metric-card">
                <h3>Opportunities Created</h3>
                <p>12</p>
            </div>
            <div class="metric-card">
                <h3>Pipeline Value</h3>
                <p>$120,000</p>
            </div>
        </div>

        <div class="section">
            <h2>Campaign Performance</h2>
            <canvas id="campaignChart" width="400" height="100"></canvas>
            <table class="campaign-table" id="campaignTable">
                <thead>
                    <tr>
                        <th onclick="sortTable(0)">Campaign Name</th>
                        <th onclick="sortTable(1)">Replies</th>
                        <th onclick="sortTable(2)">Meetings</th>
                        <th onclick="sortTable(3)">Opportunities</th>
                        <th onclick="sortTable(4)">Reply Rate</th>
                        <th onclick="sortTable(5)">Meeting Rate</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Charleston Pilot - Q1 2026</td>
                        <td>15</td>
                        <td>5</td>
                        <td>3</td>
                        <td>18.7%</td>
                        <td>6.2%</td>
                    </tr>
                    <tr>
                        <td>Austin Tech Expansion - Q1 2026</td>
                        <td>10</td>
                        <td>3</td>
                        <td>2</td>
                        <td>12.5%</td>
                        <td>3.7%</td>
                    </tr>
                </tbody>
            </table>
            <a href="#" class="export-button" onclick="exportTableToCSV('campaign-performance.csv')">Export to CSV</a>
        </div>

        <div class="navigation">
            <a href="../wireframes.html" class="nav-button secondary" title="Back to Path" style="display: flex; align-items: center; justify-content: center; width: fit-content; padding: 12px;">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="width: 24px; height: 24px; fill: currentColor;">
                    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
                </svg>
            </a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        function sortTable(n) {
            var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
            table = document.getElementById("campaignTable");
            switching = true;
            dir = "asc";
            while (switching) {
                switching = false;
                rows = table.rows;
                for (i = 1; i < (rows.length - 1); i++) {
                    shouldSwitch = false;
                    x = rows[i].getElementsByTagName("TD")[n];
                    y = rows[i + 1].getElementsByTagName("TD")[n];
                    if (dir == "asc") {
                        if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
                            shouldSwitch = true;
                            break;
                        }
                    } else if (dir == "desc") {
                        if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
                            shouldSwitch = true;
                            break;
                        }
                    }
                }
                if (shouldSwitch) {
                    rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                    switching = true;
                    switchcount++;
                } else {
                    if (switchcount == 0 && dir == "asc") {
                        dir = "desc";
                        switching = true;
                    }
                }
            }
        }

        function exportTableToCSV(filename) {
            var csv = [];
            var rows = document.querySelectorAll("table tr");
            for (var i = 0; i < rows.length; i++) {
                var row = [], cols = rows[i].querySelectorAll("td, th");
                for (var j = 0; j < cols.length; j++) 
                    row.push(cols[j].innerText);
                csv.push(row.join(","));
            }
            downloadCSV(csv.join("\n"), filename);
        }

        function downloadCSV(csv, filename) {
            var csvFile;
            var downloadLink;
            csvFile = new Blob([csv], {type: "text/csv"});
            downloadLink = document.createElement("a");
            downloadLink.download = filename;
            downloadLink.href = window.URL.createObjectURL(csvFile);
            downloadLink.style.display = "none";
            document.body.appendChild(downloadLink);
            downloadLink.click();
        }

        var ctx = document.getElementById('campaignChart').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Charleston Pilot - Q1 2026', 'Austin Tech Expansion - Q1 2026'],
                datasets: [{
                    label: 'Reply Rate',
                    data: [18.7, 12.5],
                    backgroundColor: 'rgba(245, 158, 11, 0.2)',
                    borderColor: 'rgba(245, 158, 11, 1)',
                    borderWidth: 1
                },
                {
                    label: 'Meeting Rate',
                    data: [6.2, 3.7],
                    backgroundColor: 'rgba(16, 185, 129, 0.2)',
                    borderColor: 'rgba(16, 185, 129, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    </script>
</body>
</html>
