<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>RoleFerry - The 12-Step Path to Your Next Role</title>
<link rel="stylesheet" href="styles.css" />
<link rel="icon" href="assets/roleferry_trans.png" />
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0f172a 100%);
    min-height: 100vh;
    overflow-x: hidden;
  }

  .keypad-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 2rem 1rem;
    position: relative;
  }

  .keypad-header {
    text-align: center;
    margin-bottom: 2rem;
    z-index: 10;
    position: relative;
  }

  .branding-section {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 1rem;
  }

  .wordmark-logo {
    height: 60px;
    width: auto;
  }

  .animated-logo {
    height: 60px;
    width: auto;
  }

  .keypad-title {
    font-size: 2.5rem;
    font-weight: 700;
    background: linear-gradient(45deg, #FF6B35, #FFD23F, #4A90E2, #87CEEB);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 0.5rem;
    text-shadow: 0 0 20px rgba(255, 107, 53, 0.3);
  }

  .keypad-subtitle {
    font-size: 1.2rem;
    color: #9ca3af;
    margin-bottom: 0.5rem;
    font-style: italic;
  }

  .path-container {
    position: relative;
    width: 900px;
    height: 700px;
    border-radius: 20px;
    padding: 2rem;
    z-index: 1;
  }

  .stone {
    position: absolute;
    width: 180px;
    height: 100px;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    cursor: pointer;
    transition: all 0.3s ease;
    z-index: 5;
    padding: 0.5rem;
  }

  .stone-image {
    position: absolute;
    width: 100%;
    height: 100%;
    object-fit: contain;
    z-index: 1;
    opacity: 0.9;
    pointer-events: none;
    transition: all 0.3s ease;
  }

  .stone:hover .stone-image {
    transform: scale(1.1);
  }

  .stone.completed .stone-image {
    filter: brightness(1.2) saturate(1.3);
  }

  .stone-content {
    position: relative;
    z-index: 3;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    gap: 0.4rem;
    width: 100%;
  }

  .stone .icon {
    font-size: 2rem;
    color: #1a1a1a;
    font-weight: bold;
    text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.9);
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    flex-shrink: 0;
  }

  .stone-label-text {
    font-size: 0.75rem;
    font-weight: 700;
    color: #1a1a1a;
    text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.9);
    line-height: 1.2;
    white-space: nowrap;
    flex-shrink: 0;
  }

  /* 12-Step S-Curve Positioning */
  /* Row 1: Left -> Right (1-4) */
  .stone[data-step="1"] { top: 40px; left: 20px; }
  .stone[data-step="2"] { top: 40px; left: 210px; }
  .stone[data-step="3"] { top: 40px; left: 400px; }
  .stone[data-step="4"] { top: 40px; left: 590px; }
  
  /* Row 2: Right -> Left (5-8) */
  .stone[data-step="5"] { top: 160px; left: 590px; }
  .stone[data-step="6"] { top: 160px; left: 400px; }
  .stone[data-step="7"] { top: 160px; left: 210px; }
  .stone[data-step="8"] { top: 160px; left: 20px; }
  
  /* Row 3: Left -> Right (9-12) */
  .stone[data-step="9"] { top: 320px; left: 20px; }
  .stone[data-step="10"] { top: 320px; left: 210px; }
  .stone[data-step="11"] { top: 320px; left: 400px; }
  .stone[data-step="12"] { top: 320px; left: 590px; }

  /* Launch Campaign stone (Step 11 is not launch anymore, 11 is Deliverability Launch, 12 is Analytics) */
  /* Actually Step 11 is Launch, Step 12 is Analytics per plan. */
  /* Let's check logic: 11 is Launch, 12 is Analytics. */
  
  .progress-indicator {
    position: fixed;
    top: 2rem;
    left: 2rem;
    background: rgba(0, 0, 0, 0.9);
    padding: 1rem 1.5rem;
    border-radius: 12px;
    color: white;
    font-weight: 600;
    z-index: 100;
    border: 2px solid rgba(74, 144, 226, 0.5);
  }

  .settings-link {
    position: fixed;
    top: 2rem;
    right: 2rem;
    background: rgba(0, 0, 0, 0.9);
    padding: 1rem;
    border-radius: 50%;
    color: white;
    text-decoration: none;
    font-size: 1.5rem;
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 100;
    border: 2px solid rgba(74, 144, 226, 0.5);
    transition: all 0.3s ease;
  }

  .settings-link:hover {
    background: rgba(74, 144, 226, 0.9);
    transform: scale(1.1);
  }

  .feedback-banner {
    background: linear-gradient(135deg, #4A90E2 0%, #87CEEB 100%);
    color: #1a1a1a;
    padding: 1rem;
    text-align: center;
    position: relative;
    font-weight: 600;
    z-index: 100;
    display: block;
  }

  .feedback-banner a {
    color: #1a1a1a;
    font-weight: bold;
    text-decoration: underline;
    margin-left: 0.5rem;
  }

  .feedback-banner .close-btn {
    position: absolute;
    top: 50%;
    right: 1rem;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: #1a1a1a;
    font-size: 1.5rem;
    cursor: pointer;
    font-weight: bold;
  }

  /* Footstep GIF overlay on stones */
  .footstep-gif {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: contain;
    opacity: 0.5;
    pointer-events: none;
    z-index: 4;
  }

  .footstep::before {
    content: "";
    position: absolute;
    bottom: 6px;
    left: 50%;
    transform: translateX(-50%);
    width: 26px;
    height: 22px;
    border-radius: 50%;
    background: #2d2d2d;
  }

  .footstep.left {
    transform: rotate(-18deg);
  }

  .footstep.right {
    transform: rotate(18deg);
  }

  .footstep.visible {
    animation: stepAppear 0.6s forwards;
  }

  .footstep.fade-out {
    animation: stepFadeOut 1s forwards;
  }

  @keyframes stepAppear {
    0% {
      opacity: 0;
      transform: translate(-50%, -30%) scale(0.6) rotate(var(--rot, 0deg));
    }
    40% {
      opacity: 1;
      transform: translate(-50%, -55%) scale(1.05) rotate(var(--rot, 0deg));
    }
    100% {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1) rotate(var(--rot, 0deg));
    }
  }

  @keyframes stepFadeOut {
    0% {
      opacity: 1;
    }
    100% {
      opacity: 0;
      transform: translate(-50%, -50%) scale(0.8) rotate(var(--rot, 0deg));
    }
  }

  /* Responsive Design */
  @media (max-width: 900px) {
    .path-container {
      width: 100%;
      max-width: 600px;
      height: 700px;
    }

    .stone {
      width: 80px;
      height: 80px;
    }

    .stone .icon {
      font-size: 2rem;
    }

    .stone .label {
      font-size: 0.65rem;
    }

    .keypad-title {
      font-size: 2rem;
    }
  }
</style>
</head>
<body>
  <div class="feedback-banner" id="feedbackBanner">
    <span>It's Friday! Time for your weekly feedback.</span>
    <a href="wireframes/feedback.html">Give Feedback</a>
    <button class="close-btn" onclick="document.getElementById('feedbackBanner').style.display='none'">&times;</button>
  </div>
  <a href="wireframes/settings.html" class="settings-link">‚öôÔ∏è</a>
  <div class="keypad-container">
    <div class="keypad-header">
      <div class="branding-section">
        <img src="wordmark.png" alt="RoleFerry" class="wordmark-logo">
        <img src="ani-sm.gif" alt="RoleFerry Animation" class="animated-logo">
      </div>
      <h1 class="keypad-title">The 12-Step Path to Your Next Role</h1>
      <p class="keypad-subtitle">Transform your job search with intelligent automation</p>
    </div>
    <div class="progress-indicator">
      <div>Progress: <span id="progressText">0/12</span></div>
    </div>

    <div class="path-container" id="pathContainer">
      <!-- 12 Steps -->
      <div class="stone" data-tab="job-preferences" data-step="1" title="Define ideal role criteria">
        <img src="assets/stones.png" alt="Stone" class="stone-image">
        <div class="stone-content">
          <div class="icon">üéØ</div>
          <div class="stone-label-text">Job Preferences</div>
        </div>
      </div>
      <div class="stone" data-tab="candidate-profile" data-step="2" title="Upload resume and build profile">
        <img src="assets/stones.png" alt="Stone" class="stone-image">
        <div class="stone-content">
          <div class="icon">üìÑ</div>
          <div class="stone-label-text">Your Profile</div>
        </div>
      </div>
      <div class="stone" data-tab="job-descriptions" data-step="3" title="Select and analyze job postings">
        <img src="assets/stones.png" alt="Stone" class="stone-image">
        <div class="stone-content">
          <div class="icon">üìã</div>
          <div class="stone-label-text">Job Descriptions</div>
        </div>
      </div>
      <div class="stone" data-tab="job-tracker" data-step="4" title="Manage your pipeline">
        <img src="assets/stones.png" alt="Stone" class="stone-image">
        <div class="stone-content">
          <div class="icon">üìå</div>
          <div class="stone-label-text">Job Tracker</div>
        </div>
      </div>
      <div class="stone" data-tab="pain-point-match" data-step="5" title="See alignment score and fit">
        <img src="assets/stones.png" alt="Stone" class="stone-image">
        <div class="stone-content">
          <div class="icon">üîó</div>
          <div class="stone-label-text">Pain Point Match</div>
        </div>
      </div>
      <div class="stone" data-tab="company-research" data-step="6" title="Research company and role context">
        <img src="assets/stones.png" alt="Stone" class="stone-image">
        <div class="stone-content">
          <div class="icon">üîç</div>
          <div class="stone-label-text">Company Research</div>
        </div>
      </div>
      <div class="stone" data-tab="decision-makers" data-step="7" title="Discover decision-makers">
        <img src="assets/stones.png" alt="Stone" class="stone-image">
        <div class="stone-content">
          <div class="icon">üë§</div>
          <div class="stone-label-text">Decision Makers</div>
        </div>
      </div>
      <div class="stone" data-tab="offer-creation" data-step="8" title="Craft personalized value proposition">
        <img src="assets/stones.png" alt="Stone" class="stone-image">
        <div class="stone-content">
          <div class="icon">üíº</div>
          <div class="stone-label-text">Offer Creation</div>
        </div>
      </div>
      <div class="stone" data-tab="campaign" data-step="9" title="Create follow-up sequence">
        <img src="assets/stones.png" alt="Stone" class="stone-image">
        <div class="stone-content">
          <div class="icon">üìß</div>
          <div class="stone-label-text">Campaign</div>
        </div>
      </div>
      <div class="stone" data-tab="dry-run" data-step="10" title="Review and QA your sequence">
        <img src="assets/stones.png" alt="Stone" class="stone-image">
        <div class="stone-content">
          <div class="icon">‚úÖ</div>
          <div class="stone-label-text">Dry Run / QA</div>
        </div>
      </div>
      <div class="stone" data-tab="deliverability-launch" data-step="11" title="Send with deliverability checks">
        <img src="assets/stones.png" alt="Stone" class="stone-image">
        <div class="stone-content">
          <div class="icon">üöÄ</div>
          <div class="stone-label-text">Launch Campaign</div>
        </div>
      </div>
      <div class="stone" data-tab="analytics" data-step="12" title="Track results and performance">
        <img src="assets/stones.png" alt="Stone" class="stone-image">
        <div class="stone-content">
          <div class="icon">üìä</div>
          <div class="stone-label-text">Analytics</div>
        </div>
      </div>
    </div>
  </div>

<script>
  let completedSteps = new Set();
  let lastClickedStep = null;
  const LEFT_FOOT_SRC = 'wireframes/assets/left-foot.gif';
  const RIGHT_FOOT_SRC = 'wireframes/assets/right-foot.gif';
  let isAnimatingPath = false;

  // Initialize from localStorage
  function loadProgress() {
    const saved = localStorage.getItem('roleferry-progress');
    if (saved) {
      completedSteps = new Set(JSON.parse(saved));
      completedSteps.forEach(step => {
        const element = document.querySelector(`[data-step="${step}"]`);
        if (element) element.classList.add('completed');
      });
      updateProgress();
    }
  }

  function saveProgress() {
    localStorage.setItem('roleferry-progress', JSON.stringify([...completedSteps]));
  }

  function updateProgress() {
    const progressText = document.getElementById('progressText');
    progressText.textContent = `${completedSteps.size}/12`;
  }

  function addFootstepOverlay(stepElement, stepNumber) {
    if (!stepElement || stepElement.querySelector('.footstep-gif')) return;

    const isOdd = stepNumber % 2 === 1;
    const img = document.createElement('img');
    img.src = isOdd ? LEFT_FOOT_SRC : RIGHT_FOOT_SRC;
    img.alt = isOdd ? 'Left footstep' : 'Right footstep';
    img.className = 'footstep-gif';

    // Base scale so the overlay fits nicely inside the stone
    const baseScale = 'scale(0.9)';

    // Flip horizontally for the second row (steps 5‚Äì8) since the path snakes back
    if (stepNumber >= 5 && stepNumber <= 8) {
      img.style.transform = `${baseScale} scaleX(-1)`;
    } else {
      img.style.transform = baseScale;
    }

    stepElement.appendChild(img);
  }

  function playFootstepSequence(targetStep, onComplete) {
    isAnimatingPath = true;

    const steps = [];
    for (let i = 1; i <= targetStep; i++) {
      const stone = document.querySelector(`.stone[data-step="${i}"]`);
      if (stone) {
        steps.push({ element: stone, stepNumber: i });
      }
    }

    steps.forEach((item, index) => {
      setTimeout(() => {
        addFootstepOverlay(item.element, item.stepNumber);

        // When the final step's overlay has started, wait a bit then navigate
        if (index === steps.length - 1) {
          setTimeout(() => {
            isAnimatingPath = false;
            if (typeof onComplete === 'function') {
              onComplete();
            }
          }, 300);
        }
      }, index * 500);
    });
  }

  function handleStepClick(stepElement) {
    if (isAnimatingPath) return;

    const step = parseInt(stepElement.getAttribute('data-step'));
    const tab = stepElement.getAttribute('data-tab');
    
    lastClickedStep = stepElement;
    completedSteps.add(step);
    stepElement.classList.add('completed');
    saveProgress();
    updateProgress();
    
    // Navigate to wireframe page
    const tabMap = {
      'job-preferences': 'wireframes/job-preferences.html',
      'candidate-profile': 'wireframes/candidate-profile.html',
      'job-descriptions': 'wireframes/job-descriptions.html',
      'job-tracker': 'wireframes/job-tracker.html',
      'pain-point-match': 'wireframes/pain-point-match.html',
      'company-research': 'wireframes/company-research.html',
      'decision-makers': 'wireframes/decision-makers.html',
      'offer-creation': 'wireframes/offer-creation.html',
      'campaign': 'wireframes/campaign.html',
      'dry-run': 'wireframes/dry-run.html',
      'deliverability-launch': 'wireframes/deliverability-launch.html',
      'analytics': 'wireframes/analytics.html'
    };
    
    if (tabMap[tab]) {
      playFootstepSequence(step, () => {
        window.location.href = tabMap[tab];
      });
    }
  }

  // Initialize
  document.addEventListener('DOMContentLoaded', () => {
    loadProgress();
    
    // Add click handlers to all stones
    document.querySelectorAll('.stone').forEach(button => {
      button.addEventListener('click', (e) => {
        e.preventDefault();
        handleStepClick(button);
      });
    });
  });
</script>
</body>
</html>